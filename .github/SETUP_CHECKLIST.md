# –ß–µ–∫–ª–∏—Å—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CI/CD –Ω–∞ GitHub

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç —á–µ–∫–ª–∏—Å—Ç –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CI/CD.

---

## ‚úÖ –≠—Ç–∞–ø 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Branch Protection Rules

### –í–µ—Ç–∫–∞ `main` (PRODUCTION)
- [ ] –°–æ–∑–¥–∞–Ω–æ –ø—Ä–∞–≤–∏–ª–æ –∑–∞—â–∏—Ç—ã –¥–ª—è `main`
- [ ] –í–∫–ª—é—á–µ–Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ PR –ø–µ—Ä–µ–¥ –º–µ—Ä–∂–µ–º
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –º–∏–Ω–∏–º—É–º 2 approval
- [ ] –í–∫–ª—é—á–µ–Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è status checks
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã required status checks:
  - [ ] `dev - lint and test`
  - [ ] `stage - test and deploy`
  - [ ] `production - test and deploy`
- [ ] –í–∫–ª—é—á–µ–Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è –≤—Å–µ—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- [ ] –í–∫–ª—é—á–µ–Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ linear history
- [ ] –í–∫–ª—é—á–µ–Ω–æ "Do not allow bypassing"
- [ ] –û–≥—Ä–∞–Ω–∏—á–µ–Ω –ø—Ä—è–º–æ–π push (—Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ PR)
- [ ] –û—Ç–∫–ª—é—á–µ–Ω—ã force pushes
- [ ] –û—Ç–∫–ª—é—á–µ–Ω—ã deletions

### –í–µ—Ç–∫–∞ `stage` (STAGING)
- [ ] –°–æ–∑–¥–∞–Ω–æ –ø—Ä–∞–≤–∏–ª–æ –∑–∞—â–∏—Ç—ã –¥–ª—è `stage`
- [ ] –í–∫–ª—é—á–µ–Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ PR –ø–µ—Ä–µ–¥ –º–µ—Ä–∂–µ–º
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –º–∏–Ω–∏–º—É–º 1 approval
- [ ] –í–∫–ª—é—á–µ–Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è status checks
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã required status checks:
  - [ ] `dev - lint and test`
  - [ ] `stage - test and deploy`
- [ ] –í–∫–ª—é—á–µ–Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è –≤—Å–µ—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- [ ] –û–≥—Ä–∞–Ω–∏—á–µ–Ω –ø—Ä—è–º–æ–π push (—Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ PR)
- [ ] –û—Ç–∫–ª—é—á–µ–Ω—ã force pushes
- [ ] –û—Ç–∫–ª—é—á–µ–Ω—ã deletions

### –í–µ—Ç–∫–∞ `dev` (DEVELOPMENT)
- [ ] –°–æ–∑–¥–∞–Ω–æ –ø—Ä–∞–≤–∏–ª–æ –∑–∞—â–∏—Ç—ã –¥–ª—è `dev`
- [ ] –í–∫–ª—é—á–µ–Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ PR –ø–µ—Ä–µ–¥ –º–µ—Ä–∂–µ–º (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –º–∏–Ω–∏–º—É–º 1 approval (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –í–∫–ª—é—á–µ–Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è status checks
- [ ] –î–æ–±–∞–≤–ª–µ–Ω required status check:
  - [ ] `dev - lint and test`
- [ ] –û–≥—Ä–∞–Ω–∏—á–µ–Ω –ø—Ä—è–º–æ–π push (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ
- [ ] –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `.github/CODEOWNERS` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã code owners –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

---

## ‚úÖ –≠—Ç–∞–ø 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Environments

### Environment: `production`
- [ ] –°–æ–∑–¥–∞–Ω environment `production`
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –≤–µ—Ç–∫–∞–º (—Ç–æ–ª—å–∫–æ `main`)
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã required reviewers (–º–∏–Ω–∏–º—É–º 1)
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã —Å–µ–∫—Ä–µ—Ç—ã –¥–ª—è production:
  - [ ] `SSH_HOST`
  - [ ] `SSH_USER`
  - [ ] `SSH_PRIVATE_KEY`
  - [ ] `SSH_PORT`
  - [ ] `DEPLOY_PATH`
  - [ ] `GIT_TOKEN` (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
  - [ ] –î—Ä—É–≥–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Å–µ–∫—Ä–µ—Ç—ã

### Environment: `staging`
- [ ] –°–æ–∑–¥–∞–Ω environment `staging`
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –≤–µ—Ç–∫–∞–º (—Ç–æ–ª—å–∫–æ `stage`)
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã —Å–µ–∫—Ä–µ—Ç—ã –¥–ª—è staging:
  - [ ] `SSH_HOST`
  - [ ] `SSH_USER`
  - [ ] `SSH_PRIVATE_KEY`
  - [ ] `SSH_PORT`
  - [ ] `DEPLOY_PATH`
  - [ ] `GIT_TOKEN` (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
  - [ ] –î—Ä—É–≥–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Å–µ–∫—Ä–µ—Ç—ã

### Environment: `development` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –°–æ–∑–¥–∞–Ω environment `development`
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –≤–µ—Ç–∫–∞–º (—Ç–æ–ª—å–∫–æ `dev`)
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã —Å–µ–∫—Ä–µ—Ç—ã –¥–ª—è development

---

## ‚úÖ –≠—Ç–∞–ø 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Secrets (Repository level)

### –û–±—â–∏–µ —Å–µ–∫—Ä–µ—Ç—ã (–µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è Environment secrets)
- [ ] `SSH_HOST` (–¥–ª—è fallback)
- [ ] `SSH_USER`
- [ ] `SSH_PRIVATE_KEY`
- [ ] `SSH_PORT`
- [ ] `DEPLOY_PATH`
- [ ] `GIT_TOKEN` (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

### –°–µ–∫—Ä–µ—Ç—ã –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è)
- [ ] –°–µ–∫—Ä–µ—Ç—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (Datadog, New Relic –∏ —Ç.–¥.)
- [ ] –°–µ–∫—Ä–µ—Ç—ã –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (Slack, Telegram)
- [ ] –°–µ–∫—Ä–µ—Ç—ã –¥–ª—è Docker registry
- [ ] –î—Ä—É–≥–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Å–µ–∫—Ä–µ—Ç—ã

---

## ‚úÖ –≠—Ç–∞–ø 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –≤–µ—Ç–æ–∫

- [ ] –í–µ—Ç–∫–∞ `main` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- [ ] –í–µ—Ç–∫–∞ `stage` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (—Å–æ–∑–¥–∞—Ç—å –µ—Å–ª–∏ –Ω–µ—Ç)
- [ ] –í–µ—Ç–∫–∞ `dev` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (—Å–æ–∑–¥–∞—Ç—å –µ—Å–ª–∏ –Ω–µ—Ç)

### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –≤–µ—Ç–æ–∫

–ï—Å–ª–∏ –≤–µ—Ç–∫–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç, —Å–æ–∑–¥–∞–π—Ç–µ –∏—Ö:

```bash
# –°–æ–∑–¥–∞—Ç—å –≤–µ—Ç–∫—É stage –æ—Ç main
git checkout main
git pull origin main
git checkout -b stage
git push origin stage

# –°–æ–∑–¥–∞—Ç—å –≤–µ—Ç–∫—É dev –æ—Ç main
git checkout main
git checkout -b dev
git push origin dev
```

---

## ‚úÖ –≠—Ç–∞–ø 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫

### –¢–µ—Å—Ç Branch Protection –¥–ª—è `main`
- [ ] –°–æ–∑–¥–∞–Ω–∞ —Ç–µ—Å—Ç–æ–≤–∞—è –≤–µ—Ç–∫–∞ –æ—Ç `main`
- [ ] –°–æ–∑–¥–∞–Ω PR –≤ `main`
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è –º–∏–Ω–∏–º—É–º 2 approval
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ —Ç—Ä–µ–±—É—é—Ç—Å—è status checks
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ –Ω–µ–ª—å–∑—è —Å–¥–µ–ª–∞—Ç—å merge –±–µ–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —É—Å–ª–æ–≤–∏–π

### –¢–µ—Å—Ç Branch Protection –¥–ª—è `stage`
- [ ] –°–æ–∑–¥–∞–Ω–∞ —Ç–µ—Å—Ç–æ–≤–∞—è –≤–µ—Ç–∫–∞ –æ—Ç `stage`
- [ ] –°–æ–∑–¥–∞–Ω PR –≤ `stage`
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è –º–∏–Ω–∏–º—É–º 1 approval
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ —Ç—Ä–µ–±—É—é—Ç—Å—è status checks

### –¢–µ—Å—Ç Branch Protection –¥–ª—è `dev`
- [ ] –°–æ–∑–¥–∞–Ω–∞ —Ç–µ—Å—Ç–æ–≤–∞—è –≤–µ—Ç–∫–∞ –æ—Ç `dev`
- [ ] –°–æ–∑–¥–∞–Ω PR –≤ `dev`
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ —Ç—Ä–µ–±—É—é—Ç—Å—è status checks

### –¢–µ—Å—Ç Environments
- [ ] –°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç–æ–≤—ã–π workflow —Å environment `production`
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è manual approval
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ —Å–µ–∫—Ä–µ—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –≤ workflow

---

## ‚úÖ –≠—Ç–∞–ø 6: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [ ] –ü—Ä–æ—á–∏—Ç–∞–Ω–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è `.github/BRANCH_PROTECTION_SETUP.md`
- [ ] –ü—Ä–æ—á–∏—Ç–∞–Ω–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è `.github/GITHUB_ENVIRONMENTS_SETUP.md`
- [ ] –ö–æ–º–∞–Ω–¥–∞ –æ–∑–Ω–∞–∫–æ–º–ª–µ–Ω–∞ —Å –Ω–æ–≤—ã–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
- [ ] –°–æ–∑–¥–∞–Ω runbook –¥–ª—è –¥–µ–ø–ª–æ—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üìù –ó–∞–º–µ—Ç–∫–∏

–ó–∞–ø–∏—à–∏—Ç–µ –∑–¥–µ—Å—å –ª—é–±—ã–µ –≤–∞–∂–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏ –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ —Å—Ç–æ–ª–∫–Ω—É–ª–∏—Å—å:

```
–î–∞—Ç–∞: ___________
–ó–∞–º–µ—Ç–∫–∏:
- 
- 
- 
```

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞ GitHub:

1. ‚úÖ –ü–µ—Ä–µ–π—Ç–∏ –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ workflows (—Å–º. TODO.md, –≠—Ç–∞–ø 2)
2. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —É–ª—É—á—à–µ–Ω–Ω—ã–µ CI workflows
3. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å security scanning
4. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2024
